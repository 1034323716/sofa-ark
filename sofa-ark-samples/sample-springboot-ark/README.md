# How to build an executable-ark-jar
## Introduction
This sample project shows how to build an executable-ark-jar based on 
a springboot project with the tool of `sofa-ark-maven-plugin`.

## Preparation
As this project depends on the ark-plugin generated by the project of 
[`sample-ark-plugin`](../sample-ark-plugin/README.md), please ensure the 
sample sample-ark-plugin installed in your local maven repository before run 
this project.

## Tools
The `Maven plugin` of `sofa-ark-maven-plugin` is provided to build a standard
`executable-ark-jar`, and just needs some simple configurations, Details please
refer to [doc](./README.md)

## Step By Step
### Create a Spring Boot Web Project
Visit [`https://start.spring.io/`](https://start.spring.io/) and generate a standard springboot-web project

### Import sample-ark-plugin
Add a dependency in main `pom.xml` as follows:
```
<dependency>
     <groupId>com.alipay.sofa</groupId>
     <artifactId>sample-ark-plugin</artifactId>
     <classifier>ark-plugin</classifier>
     <version>0.1.0</version>
 </dependency>
```

### Configure sofa-ark-maven-plugin
The maven plugin of sofa-ark-plugin-maven-plugin is configured in main pom.xml, it configures as follows:

```
build>
    <plugins>
        <plugin>
            <groupId>com.alipay.sofa</groupId>
            <artifactId>sofa-ark-maven-plugin</artifactId>
            <executions>
                <execution>
                    <id>default-cli</id>
                    
                    <!--goal executed to generate executable-ark-jar -->
                    <goals>
                        <goal>repackage</goal>
                    </goals>
                    
                    <configuration>
                        <!--specify destination where executable-ark-jar will be saved, default saved to ${project.build.directory}-->
                        <outputDirectory>./target</outputDirectory>
                        
                        <!--default none-->
                        <arkClassifier>executable-ark</arkClassifier>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>
```

The configured items are explained as follows:
+ `outputDirectory`: specify destination where `executable-ark-jar` will be saved, 
default saved to ${project.build.directory}.
+ `arkClassifier`: specify classifier in the maven location of `executable-ark-jar`, default none.

## package/install/deploy
+ package: execute `mvn package`, the `executable-ark-jar` file generated would be saved to the configured 
value of `outputDirectory`.
+ install: execute `mvn install`, the `executable-ark-jar` would be installed local maven repository.
+ deploy: execute `mvn deploy`, just as usual practice.

## run in command line
we support command such as `java -jar executable-ark.jar` to startup application, similar to what this sample
project does, execute command line: `java -jar target/sofa-ark-sample-springboot-ark-0.1.0-executable-ark.jar`
to startup this demo. 

## run in IDE
if you want to run application in IDE, some additional dependency need to be imported. 

+ Spring Boot Project
you should add dependency as follows:

```
<dependency>
    <groupId>com.alipay.sofa</groupId>
    <artifactId>sofa-ark-springboot-starter</artifactId>
    <version>0.1.0</version>
</dependency>
```
+ Common Java Project
you should add dependency as follows:

```
<dependency>
    <groupId>com.alipay.sofa</groupId>
    <artifactId>sofa-ark-ide-starter</artifactId>
    <version>0.1.0</version>
</dependency>
```

besides, you should add `SofaArkBootstrap.launch(args);` in `Main` Class of Application, do as follows:

```java
public class Application{
    
    public static void main(String[] args) { 
        SofaArkBootstrap.launch(args);
    }
    
}
```
